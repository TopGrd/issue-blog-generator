---
date: 2018-12-03T08:14:51Z
description: ""
featured_image: ""
tags: []
title: Prettier + Eslint => ğŸ’–
---
# Prettier
## ä¸ºä»€ä¹ˆè¦ç”¨ Prettierï¼Ÿ
å…³äºä»£ç é£æ ¼çš„åœ£æˆ˜ï¼Œä»åˆ°åº•è¦ä¸è¦åˆ†å·ï¼Œç¼©è¿›ç”¨tabè¿˜æ˜¯spaceï¼Œ2ä¸ªè¿˜æ˜¯4ä¸ªç©ºæ ¼ï¼Œä»æœªåœæ­¢è¿‡ã€‚ä½†æ˜¯ä½œä¸ºç°ä»£javascript å¼€å‘è€…ï¼Œwho cares ! æˆ‘ä»¬ä½¿ç”¨eslint å°±å¯ä»¥è½»æ¾çš„æ§åˆ¶å›¢é˜Ÿçš„ä»£ç é£æ ¼ï¼Œä½†æ˜¯ eslint åœ¨æŸäº›æ–¹é¢å°±æ— æ³•å¼ºåˆ¶äº†ï¼Œä¸‹é¢2ä»½ä»£ç 
```js
if (a < 1) {
	console.log('haha');
}
```

```js
if (a < 1) 
{
 console.log('haha');
}
```
Eslint éƒ½ä¸ä¼šæŠ¥é”™ï¼Œè¿˜æœ‰ trailing commasï¼Œ[Why you should enforce Dangling Commas for Multiline Statements](https://medium.com/@nikgraf/why-you-should-enforce-dangling-commas-for-multiline-statements-d034c98e36f8) ç­‰ç­‰ã€‚è€Œprettier +  eslint å¯ä»¥å®Œç¾çš„é¿å…è¿™äº›é£æ ¼ä¸ç»Ÿä¸€çš„é—®é¢˜ã€‚å½“ä½ çš„é£æ ¼ä¸å›¢é˜Ÿ eslint é…ç½®æœ‰ä¸åŒæ—¶ï¼Œåªéœ€è¦prettierä¸€ä¸‹ï¼Œå°±å¯ä»¥ä¿æŒä¸€è‡´ï¼Œä¸éœ€è¦åœ¨å†™ä»£ç æ—¶å…³å¿ƒå·®å¼‚ï¼Œå¹¶ä¸” prettier ä¹Ÿæ˜¯å½“å‰æœ€ç«çš„ä¸€æ¬¾ format å·¥å…·ï¼Œå¾ˆå¤šå¼€æºé¡¹ç›®ä¸‹é¢ï¼Œä½ ä¼šå‘ç°éƒ½ä¼šæœ‰ä¸€ä»½ `.prettierrc`

> By far the biggest reason for adopting Prettier is to stop all the on-going debates over styles. It is generally accepted that having a common style guide is valuable for a project and team.
> 
> åˆ°ç›®å‰ä¸ºæ­¢ï¼Œé‡‡ç”¨Prettierçš„æœ€å¤§åŸå› æ˜¯åœæ­¢æ‰€æœ‰å…³äºé£æ ¼çš„äº‰è®ºã€‚äººä»¬æ™®éè®¤ä¸ºï¼Œæ‹¥æœ‰ä¸€ä¸ªå…±åŒçš„é£æ ¼æŒ‡å—å¯¹äºé¡¹ç›®å’Œå›¢é˜Ÿæ¥è¯´æ˜¯æœ‰ä»·å€¼çš„ã€‚
> [Prettier Â· Opinionated Code Formatter](https://prettier.io/)

## ä½¿ç”¨æ–¹å¼
ä½¿ç”¨å‰æœ€å¥½èƒ½ç”Ÿæˆä¸€ä»½ prettier é…ç½®æ–‡ä»¶[Configuration File Â· Prettier](https://prettier.io/docs/en/configuration.html)ï¼Œæ”¾åœ¨ä½ éœ€è¦æ ¼å¼åŒ–çš„é¡¹ç›®ç›®å½•ä¸‹ã€‚å¦‚æœéœ€è¦ï¼Œé…ç½®ä¸€ä»½`.prettierignore` . è§„åˆ™å’Œ`gitignore`ä¸€æ ·ï¼Œå…¶ä¸­çš„æ–‡ä»¶ä¸ä¼šè¢«å¤„ç†ã€‚

1. CLI ä½¿ç”¨
é¦–å…ˆä½¿ç”¨
```shell
npm install --save-dev --save-exact prettier
// or globally
npm install --global prettier
```
æ ¼å¼åŒ–è‡ªå·±é¡¹ç›®ç›®å½•ä¸‹æ–‡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨
`prettier --write 'src/**/*.js'`
ç›®å½•ä½¿ç”¨çš„æ˜¯[node-glob](https://github.com/isaacs/node-glob/blob/master/README.md#glob-primer)è¯­æ³•ã€‚
2. ç¼–è¾‘å™¨æ’ä»¶
* [sublime](https://packagecontrol.io/packages/JsPrettier)
* [Prettier - Code formatter - Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)
* [webstorm](https://prettier.io/docs/en/webstorm.html)
* [Vim Setup Â· Prettier](https://prettier.io/docs/en/vim.html)
* [atom](https://github.com/prettier/prettier-atom)
3. **é…åˆ eslint ä½¿ç”¨**
é¦–å…ˆåœ¨é¡¹ç›®ä¸‹å®‰è£…
`npm install -D eslint-plugin-prettier eslint-config-prettier`
ç„¶åå¯¹`.eslintrc`è¿›è¡Œç›¸å…³é…ç½®
```json
{
  "parser": "babel-eslint",
  "extends": ["eslint-config-hcb", "prettier"],
  "plugins": ["prettier"],
	"rules": {
    "prettier/prettier": "error"
  },
  "globals": {},
  "parserOptions": {
    "ecmaFeatures": {
      "legacyDecorators": true
    }
  }
}
```
`eslint-plugin-prettier` æ’ä»¶ä¼šè°ƒç”¨ prettier å¯¹ä½ çš„ä»£ç é£æ ¼è¿›è¡Œæ£€æŸ¥ã€‚ä¹Ÿå°±æ˜¯ä»–ä¼šä½¿ç”¨prettieræ ¼å¼åŒ–ä½ çš„ä»£ç , ç„¶åæ¯”è¾ƒæ ¼å¼åŒ–å‰åçš„ä»£ç ï¼Œä¸ä¸€è‡´çš„åœ°æ–¹ä¼šåƒeslinté‚£æ ·æŠ¥é”™ã€‚
![image](https://user-images.githubusercontent.com/4202848/49361264-7fc8b000-f716-11e8-8ed8-f29e73046471.png)

å½“ç„¶ä½ ä¸éœ€è¦é©¬ä¸Šæ‰‹åŠ¨æ”¹ï¼Œä½ å¯ä»¥ç›´æ¥ç”¨prettier cli æˆ–è€…ç¼–è¾‘å™¨æ’ä»¶è¿›è¡Œæ ¼å¼åŒ–ã€‚
`eslint-config-prettier`èƒ½å¤Ÿå…³é—­ä¸å¿…è¦æˆ–è€…ä¸prettierå†²çªçš„lint é€‰é¡¹ï¼Œå°¤å…¶æ˜¯ä¸å¸Œæœ›ä¸€ä¸ª error å‡ºç°2æ¬¡ï¼Œä½†æ˜¯æˆ‘ä»¬è¦ç¡®ä¿ prettier åœ¨ eslint é…ç½®é‡Œextendsçš„æœ€åã€‚
4. åœ¨pre-commit é’©å­é‡Œä½¿ç”¨
Prettier ä¸ eslint å’Œ pre-commit é’©å­ä½¿ç”¨å¯è°“æ˜¯æœ€ä½³å®è·µï¼ŒæŒ‰ç¬¬ä¸‰æ¡é…å¥½eslint å’Œ prettier åï¼Œåœ¨ é¡¹ç›® `package.json` é‡Œè¿›è¡Œé…ç½®
```json
"scripts": {
    "eslint": "eslint src",
    "precommit": "prettier --write 'src/**/*.js' && npm run eslint",
    "commitmsg": "commitlint -E GIT_PARAMS",
    "start": "galileo server -p 8900",
    "dev": "galileo build dev",
    "qa": "galileo build qa",
    "pub": "galileo build prod --static pub",
    "prod": "galileo build prod",
    "prettier": "prettier --write 'src/**/*.js'"
  }
```

è¿™æ ·æ¯æ¬¡æäº¤ä»£ç æ—¶ä¼šè‡ªåŠ¨å¸®ä½ æ ¼å¼åŒ–ä»£ç å¹¶è¿›è¡Œ eslint æ ¡éªŒã€‚



> é“¾æ¥ 
[âš¡ï¸ - James Long - A Prettier Printer (plus bonus clip!) - React Conf 2017 - YouTube](https://www.youtube.com/watch?v=hkfBvpEfWdA)
[Javascript code formatting - Christopher Chedeau, React London 2017 - YouTube](https://www.youtube.com/watch?v=0Q4kUNx85_4)



